<!doctype html>
<html>

<head>
    <title>Hex Game</title>
    <style>
    body {
        margin: 0;
    }

    canvas {
        position: absolute;
        inset: 0;
        display: block;
        width: 100%;
        height: 100%;
    }
    </style>
</head>
<body>
    <canvas id="canv"></canvas>
    <!-- Engine-specific Code -->
    <script src="./engine/Vector2.js"></script>
    <script src="./engine/Scene.js"></script>
    <script src="./engine/SceneManager.js"></script>
    <script src="./engine/GameObject.js"></script>
    <script src="./engine/Component.js"></script>
    <script src="./engine/Input.js"></script>

    <script src="./engine/Transform.js"></script>
    <script src="./engine/Polygon.js"></script>

    <!-- Game-specific Code -->
    <script src="./game/utils/HexGridConfig.js"></script>
    <script src="./game/utils/HexCoordinates.js"></script>
    <script src="./game/utils/HexMath.js"></script>

    <script src="./game/scenes/GameScene.js"></script>
    <script src="./game/prefabs/HexGridGameObject.js"></script>
    <script src="./game/prefabs/HexGameObject.js"></script>
    <script src="./game/components/LayoutController.js"></script>
    <script src="./game/components/GridController.js"></script>
    <script src="./game/components/HexSpawnController.js"></script>
    <script src="./game/components/HexStateController.js"></script>
    <script>
        const canvas = document.querySelector("#canv")
        const ctx = canvas.getContext("2d")

        let currentScene = SceneManager.addScene(new GameScene())

        function start() {
            resizeCanvas()
            currentScene.start()
            gameLoop()
        }

        function gameLoop() {
            update()
            draw()
            requestAnimationFrame(gameLoop)
        }

        function update() {
            currentScene.update()
        }

        function draw() {
            ctx.fillStyle = "#00102aff"
            ctx.beginPath()
            ctx.rect(0, 0, canvas.width, canvas.height)
            ctx.fill()

            currentScene.draw(ctx)
        }

        function resizeCanvas() {
            canvas.width = (window.innerWidth)
            canvas.height = (window.innerHeight)
        }

        // addEventListener("keydown", Input.keydown)
        // addEventListener("keyup", Input.keyup)
        addEventListener("resize", resizeCanvas)
        requestAnimationFrame(start)
    </script>
</body>

</html>